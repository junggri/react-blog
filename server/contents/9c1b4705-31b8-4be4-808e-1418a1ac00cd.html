<pre class="ql-syntax" spellcheck="false">import React, { useRef, useState } from "react";
import { AdminLoginBoxComp } from "../styled-comp";
import util from "../lib/axios";
import useCSRF from "../useHooks/useCSRF";

function Admin({ history }: any) {
   const [user, setUser] = useState({
      id: "jjuu6933",
      pwd: "wowwjd12!@",
      number: "1",
   });

   const [visivle, setVisible] = useState&lt;boolean&gt;(false);
   const [number, setNumber] = useState&lt;number&gt;(0);
   const [certification, setCertification] = useState&lt;boolean&gt;(false);
   const count = useRef(0);


   const csrf = useCSRF();


   const onChange = (e: React.ChangeEvent&lt;HTMLInputElement&gt;) =&gt; {
      setUser(state =&gt; ({
         ...state,
         [e.target.name]: e.target.value,
      }));
   };


   const onSubmit = async () =&gt; {
      // console.log(count.current);TODO 3번이상일때 디비에 잠금걸자.
      const { data } = await util.adminLogin(user, csrf);
      if (!data.state) count.current++;
      else {
         setCertification(true);
      }
      setVisible(true);
      setNumber(data.number);
   };

   const onCertificationPhone = async () =&gt; {
      if (parseInt(user.number) === number &amp;&amp; certification) {
         await util.setToken(csrf);
         history.push("/");
      } else {
         count.current++;
      }
   };


   return (
      &lt;AdminLoginBoxComp&gt;
         &lt;div className="login-inputbox"&gt;
            &lt;input type="text" name="id" value={user.id} placeholder="아이디" onChange={onChange} /&gt;
            &lt;input type="password" name="pwd" value={user.pwd} placeholder="비밀번호" onChange={onChange} /&gt;
         &lt;/div&gt;
         {visivle &amp;&amp;
         &lt;div className="certification-numberBox"&gt;
            &lt;input type="text" value={user.number} name="number" onChange={onChange} /&gt;
            &lt;button onClick={onCertificationPhone}&gt;
               확인하기
            &lt;/button&gt;
         &lt;/div&gt;
         }
         &lt;button className="login-btn" onClick={onSubmit}&gt;
            인증시작하기
         &lt;/button&gt;
      &lt;/AdminLoginBoxComp&gt;
   );
}

export default Admin;
</pre>